<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="static/css/play.css">
  </head>
  <body>
    <div id="app">
      <div id="box">
        <span class="boxDetails" id="boxTitle">Box title: {{ box.box.name }}</span><br />
        <span class="boxDetails" id="owner">Owner: {{ box.box.owner }}</span><br />
        <span class="boxDetails" id="verbCount">VerbCount: {{ box.box.verbCount }}</span><br />
        <span class="boxDetails" id="fromTo">Type: {{ box.box.front }} - {{ box.box.back }}</span><br />
        <span class="boxDetails" id="isPublic">Is Public: {{ box.box.public }}</span><br />
      </div>
      <div id="startPlayHolder" v-bind:class="{'is-collapsed' : collapsedStartPlayHolder }">
        <button v-on:click="startPlay">Play</button>
      </div>
      <div id="playHolder" v-bind:class="{'is-collapsed' : collapsedPlayHolder }">
        <div id="verbsHolder">
          <h1> {{sideA}} </h1>
          <h1> {{sideB}} </h1>
        </div>
        <div id="showVerbHolder" v-bind:class="{'is-collapsed' : collapsedShowVerbHolder }">
          <button v-on:click="showVerb">Show</button>
        </div>
        <div id="correctWrongHolder" v-bind:class="{'is-collapsed' : collapsedCorrectWrongHolder }">
          <button v-on:click="markedCorrect">Correct</button>
          <button v-on:click="markedWrong">Wrong</button>
        </div>
      </div>
    <script>
      var app = new Vue({
        el: '#app',
        methods: {
          loadNextVerb: function() {
            this.currentIndex++;
            if (this.box.verbPlayList.length <= this.currentIndex) {
              alert("Box completed!")
              this.startPlay()
            } else {
              this.sideA = this.box.verbPlayList[this.currentIndex].verb.front;
              this.sideB = "-"
            }
            this.collapsedStartPlayHolder = true
            this.collapsedPlayHolder      = false
            this.collapsedShowVerbHolder  = false
            this.collapsedCorrectWrongHolder = true
          },
          markedCorrect: function() {
            this.loadNextVerb()
          },
          markedWrong: function() {
            this.loadNextVerb()
            
          },
          startPlay: function() {
              this.currentIndex = -1;
              this.loadNextVerb()
          },
          showVerb: function() {
            this.sideB = this.box.verbPlayList[this.currentIndex].verb.back;
            this.collapsedShowVerbHolder = true
            this.collapsedCorrectWrongHolder = false
          }
        },
        data: {
          collapsedStartPlayHolder: false,
          collapsedPlayHolder: true,
          collapsedShowVerbHolder: true,
          collapsedCorrectWrongHolder: true,
          sideA: "-",
          sideB: "-",
          currentIndex: null,
          box: {
              }
        }
      })
    </script>
  </body>
</html>